<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- åŠ å…¥é˜²å¿«å– Meta Tags -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    
    <title>è‡ºå¤§åƒåˆ°å</title>
    
    <!-- å¼•å…¥ React å’Œ Tailwind -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        body { -webkit-user-select: none; user-select: none; -webkit-tap-highlight-color: transparent; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        /* éš±è—æª”æ¡ˆè¼¸å…¥æ¡† */
        input[type="file"] { display: none; }
        
        /* Modal å‹•ç•« */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .modal-overlay { animation: fadeIn 0.2s ease-out; }
        .modal-content { animation: slideUp 0.3s ease-out; }
        
        /* AI é–ƒçˆæ•ˆæœ */
        @keyframes sparkle {
            0% { opacity: 0.5; transform: scale(0.9); }
            50% { opacity: 1; transform: scale(1.1); }
            100% { opacity: 0.5; transform: scale(0.9); }
        }
        .sparkle-anim { animation: sparkle 2s infinite ease-in-out; }
    </style>
</head>
<body class="bg-orange-50 text-gray-800">
    <div id="root"></div>

    <script type="text/babel">
        // ==========================================
        // â–¼ é è¨­è³‡æ–™ (å·²åŒ…å«æŸ’é£Ÿè²³ä¿®æ­£) â–¼
        // ==========================================
        const DEFAULT_CSV_CONTENT = `é¤å»³åç¨±;è©•åˆ†;åƒ¹æ ¼;ä¸»åˆ†é¡;æ¬¡åˆ†é¡;å‚™è¨»
éƒ­è¨˜ç‰›è‚‰éºµ;4.2;$1-200;æ­£é¤;ä¸­å¼éºµé£Ÿ;
é±·åå¸ A Toast;4.4;$1-200;æ—©é¤/æ—©åˆé¤;åå¸/ä¸‰æ˜æ²»;
å…¬é¤¨é£Ÿå ‚;4.4;$1-200;æ­£é¤;å°å¼å°åƒ;
é˜¿é¸æ‰‹å·¥æ³•åœ‹éºµåŒ…;3.9;$1-200;æ­£é¤;è¶Šå—æ–™ç†;
ç«™é£Ÿå¯ä»¥;4.4;$1-200;æ­£é¤;è¤‡åˆå¼/ç°¡é¤;
æ²™å—²å£«å¤š;4.2;$1-200;æ­£é¤;æ¸¯å¼æ–™ç†;
å¤§ç¦åˆ©æ’éª¨å¤§ç‹ å…¬é¤¨åº—;3.8;$1-200;æ­£é¤;å°å¼ä¾¿ç•¶;
è ¶å±…ç”Ÿæ´»ç¾é£Ÿ;4.2;$1-200;æ­£é¤;å°å¼å®¶å¸¸èœ;
äº”ä¹éºµé¤¨ï¼ˆå…¬é¤¨åº—ï¼‰;4.5;$1-200;æ­£é¤;ä¸­å¼éºµé£Ÿ;
ä¸ƒé‡Œäº­;3.9;$1-200;æ­£é¤;å°å¼ç°¡é¤;
é³³åŸç‡’è‡˜ç²µèœ;4.0;$1-200;æ­£é¤;æ¸¯å¼ç‡’è‡˜;
åšé£Ÿå‡è¡¡é£²é£Ÿå°ˆè³£åº—;4.3;$1-200;æ­£é¤;å¥åº·é¤ç›’;
å°é£¯å»³;3.9;$1-200;æ­£é¤;å°å¼ç°¡é¤;
é›ªçƒå’–å•¡ (å…¬é¤¨åº—);4.4;$1-200;æ—©é¤/æ—©åˆé¤;å’–å•¡/è¼•é£Ÿ;
ä¸”æ…¢é£Ÿæ‰€;4.9;$1-200;æ—©é¤/æ—©åˆé¤;å‚³çµ±æ—©é¤;
é˜¿è‹±æ»·è‚‰é£¯;3.6;$1-200;æ­£é¤;å°å¼å°åƒ;
ä¸€å·é‹ç‡’éºµ;4.5;$1-200;æ­£é¤;å°å¼é‹ç‡’éºµ;
é †åœ’å°é¤¨;4.0;$200-400;æ­£é¤;ä¸­å¼é»å¿ƒ/éºµé£Ÿ;
è¦ªä¾†é£Ÿå ‚;4.2;$1-200;æ­£é¤;å°å¼å¿«ç‚’;
ç¦äºŒæ¼¢å ¡è£½é€ æ‰€;4.0;$1-200;æ—©é¤/æ—©åˆé¤;æ¼¢å ¡;
æè¨˜æ°´é¤ƒ;3.7;$1-200;æ­£é¤;æ°´é¤ƒ/éºµé£Ÿ;
ç‘å“¥é›è‚‰é£¯;4.8;$1-200;æ­£é¤;é›è‚‰é£¯;
é˜¿å­ŸçŸ³ç¢—ç‡’æ²³ç²‰;4.5;$1-200;æ­£é¤;è¶Šå—æ–™ç†;
è€å“¥é›è‚‰é£¯ä¹¾æ‹Œéºµ;3.9;$1-200;æ­£é¤;é›è‚‰é£¯/éºµé£Ÿ;
æ–‡å“¥ å··ä»”å£ç±³ç²‰æ¹¯;4.3;$1-200;æ­£é¤;å°å¼ç±³ç²‰æ¹¯;
æ¹„è³½é›²æ³°æ–™ç†;4.3;$1-200;æ­£é¤;æ³°å¼æ–™ç†;
å¥½é£Ÿæ—©é¤;4.6;$1-200;æ—©é¤/æ—©åˆé¤;å‚³çµ±æ—©é¤;
å¤§å®‰ç±³ç²‰æ¹¯;4.7;$1-200;æ­£é¤;å°å¼å°åƒ;
å…¬é¤¨é˜¿å§¨æ»·å‘³;4.7;$1-200;æ­£é¤/å®µå¤œ;æ»·å‘³;
è¶Šå—æ¸…åŒ–æ²³ç²‰;4.3;$1-200;æ­£é¤;è¶Šå—æ–™ç†;
Miss Energy èƒ½é‡å°å§;4.1;$1-200;æ­£é¤;å¥åº·é¤ç›’;
æµ·é®®ç²¥.éºµ;4.6;$1-200;æ­£é¤;æµ·é®®ç²¥éºµ;
ç³Šå¡—éºµ;4.1;$1-200;æ­£é¤;ä¸­å¼éºµé£Ÿ;
é¾æ³‰æ·±æµ·é®®é­šæ¹¯;4.1;$1-200;æ­£é¤;é®®é­šæ¹¯;
æŸ’é£Ÿè²³;4.2;$1-200;æ­£é¤;å°å¼ç°¡é¤;é¡ä¼¼å­¸ç”Ÿé¤å»³
æ¨è¨˜å…¨éº¥ç‡Ÿé¤Šæ½¤é¤…æ²;4.2;$1-200;é»å¿ƒ;æ½¤é¤…;
ç¥¥æ»¿é€Ÿé£Ÿé¤åŠ;4.3;$1-200;æ­£é¤;æµ·é®®/æ¸…è’¸é­š;
å¾—è¨˜éº»è¾£è„†çš®è‡­è±†è…;4.0;$1-200;æ­£é¤;éº»è¾£è‡­è±†è…;
æŒ‡æœ‰é›é£¯ CHICKEN RICE ONLY;4.2;$1-200;æ­£é¤;æµ·å—é›é£¯;
é˜¿é‡Œåª½åª½å—æ´‹æ–™ç†;4.3;$1-200;æ­£é¤;æ–°é¦¬æ–™ç†;
éº»è¾£å·´è•¾;4.2;$1-200;æ­£é¤;é‡æ…¶é…¸è¾£ç²‰;
é˜¿éƒé¹½é…¥é›;4.3;$1-200;å®µå¤œ;ç‚¸ç‰©;
é˜¿äºŒéº»è¾£é¹¹æ°´é›;4.8;$1-200;æ­£é¤/å®µå¤œ;é¹¹æ°´é›;
å°æ–¹å¡ŠéŸ“å¼å¯é Œé¬†é¤…;4.9;$1-200;ç”œé»;é¬†é¤…/å¯é Œ;
äººæ€§ç”œé»;4.8;;ç”œé»;æ³¡èŠ™/ç”œé»;
YoYoéŸ“å¼é£¯æ²;4.6;æš«æ™‚é—œé–‰;æ­£é¤;éŸ“å¼æ–™ç†;
å›å‘³éºµç…é¤…;3.8;$1-200;é»å¿ƒ;ä¸­å¼é¤¡é¤…;
é¾æ½­è±†èŠ±;4.3;$1-200;ç”œé»;è±†èŠ±;
La fossette è€æ³•çš„é…’çª©;4.8;æš«æ™‚é—œé–‰;ç”œé»;æ³•å¼ç”œé»;
æ¨‚å’Œç‰›æ’é¤¨;4.4;$200-400;æ­£é¤;ç‰›æ’;
ç¥ç‡ˆæ“ä¸€ä¸‹;4.5;$400-600;æ­£é¤;å’–å“©/ç•°åœ‹;
å‰å¤©å…ƒæ‹‰éºµ;4.4;$200-400;æ­£é¤;æ—¥å¼æ‹‰éºµ;
å¤§å±±æ±é¤…èˆ–;4.2;$1-200;é»å¿ƒ;åŒ…å­/é¥…é ­;
ç±³ç±³æ‘ éŸ“å¼æ‹Œé£¯;4.3;$1-200;æ­£é¤;éŸ“å¼æ–™ç†;
æ³°é †è¡—è»Šè¼ªé¤…;4.6;$1-200;ç”œé»;è»Šè¼ªé¤…;
è˜‡æ´»ç¾©å¤§åˆ©éºµåŠ;4.3;$200-400;æ­£é¤;ç¾©å¼æ–™ç†;
ç’ç”°PureTimeå®¶åº­æ–™ç†;4.8;$200-400;æ­£é¤;å°å¼ç°¡é¤;
é˜¿è–„éƒå°å¼å°é…’é¤¨;4.6;$200-400;æ­£é¤;å°å¼å±…é…’å±‹/é¤ƒå­;
ç‡’è‚‰æ”¿å®—;4.7;$400-600;æ­£é¤;æ—¥å¼ç‡’è‚‰;
æ± å…ˆç”Ÿ kopitiam;4.3;$200-400;æ­£é¤;é¦¬ä¾†è¥¿äºæ–™ç†;
å°èºæ³¢;4.3;$200-400;æ­£é¤;èºè„ç²‰;
å¢¨ç«¹äº­ ç‡ƒéºµæœ¬å®¶;4.6;$1-200;æ­£é¤;ä¸­å¼éºµé£Ÿ;
é›æ¹¯å¤§å”;4.7;$400-600;æ­£é¤;ç«é‹;
è©¹è¨˜éº»è¾£ç«é‹;4.4;$600-1000;æ­£é¤;éº»è¾£ç«é‹;
å“é±»æµ·é®®ç†±ç‚’åº—;4.1;$200-400;æ­£é¤;å°å¼ç†±ç‚’;
å°å°šå“ç²¾åˆ¶é‹ç‰©;4.7;$200-400;æ­£é¤;ç«é‹;
ç¥ç§˜èŠ±åœ’;4.4;$1-200;æ­£é¤;è¥¿å¼ç°¡é¤;
é›™æœˆé£Ÿå“ç¤¾;4.9;$200-400;æ­£é¤;å°å¼é¤Šç”Ÿæ¹¯å“;
TaSweetè“å­å±‹;4.3;;ç”œé»;è›‹ç³•æ²;
ç„¡å°¾ç†Šé›è›‹ç³•;4.7;$1-200;ç”œé»;é›è›‹ç³•;
Barkers;4.4;$200-400;æ­£é¤;ç¾å¼ç†±ç‹—/æ¼¢å ¡;
ONE GOODçƒ¤è‚‰é£¯;4.8;$1-200;æ­£é¤;æ—¥å¼ä¸¼é£¯;
è˜‡è‰salvia;4.5;$200-400;æ­£é¤;ç¾©å¤§åˆ©éºµ/ç°¡é¤;
è€æ€§å­ Xai Xing DÃ©;4.5;$200-400;æ­£é¤;éŸ“å¼/ç¾©å¼;
æ‹‰éºµã‚‰ãéººé­šå º;4.7;$200-400;æ­£é¤;æ—¥å¼æ‹‰éºµ;
å°æå­æ¸…ç²¥å°èœ;3.7;$200-400;æ­£é¤/å®µå¤œ;æ¸…ç²¥å°èœ;
å··å­æéºµ;4.8;$1-200;æ­£é¤;éºµé£Ÿ;
å¡Šé›å¸«é£Ÿå‹™æ‰€;4.4;$200-400;æ­£é¤;ç‚¸é›/ç°¡é¤;
å¤§åŸ”éµæ¿ç‡’;4.0;$200-400;æ­£é¤;éµæ¿ç‡’;
å¢¨æ´‹æ‹‰éºµ;4.1;$200-400;æ­£é¤;æ—¥å¼æ‹‰éºµ;
æ³°è¡—é ­;3.9;$200-400;æ­£é¤;æ³°å¼æ–™ç†;
å°å·è¥¿å ‚;4.2;$200-400;æ­£é¤;ä¸­å¼éºµé£Ÿ/éº»è¾£;
NoNameç„¡åå’–å“©;4.3;$1-200;æ­£é¤;æ—¥å¼å’–å“©;
è±¬ã„Ÿæ—©åˆé¤;4.6;$1-200;æ—©é¤/æ—©åˆé¤;ä¸‰æ˜æ²»/è›‹é¤…;
æºè€é´¨å¹³åƒ¹å°ç«é‹;4.4;$1-200;æ­£é¤;ç«é‹;
ç¨»å’–å“©;4.4;$200-400;æ­£é¤;æ—¥å¼å’–å“©;
è‡ºä¸€ç‰›å¥¶å¤§ç‹;4.1;$1-200;ç”œé»;å†°å“/æ¹¯åœ“;
ç‘ªè‰çæ¯”è–©;4.3;$200-400;æ­£é¤;æŠ«è–©;
éº¥å­ç£¨éºµ;3.8;$1-200;æ­£é¤;æ—¥å¼æ‹‰éºµ;
å·«é›²;4.3;$200-400;æ­£é¤;é›²å—æ–™ç†;
Este dÃ­a é€™ä¸€å¤©ç•°åœ‹å»šæˆ¿;4.9;$200-400;æ­£é¤;å¤å·´ä¸‰æ˜æ²»;
Mr. é›ªè…;4.6;$1-200;ç”œé»;å†°å“;
é¦–çˆ¾ä¹‹å®¶;4.0;$400-600;æ­£é¤;éŸ“å¼æ–™ç†;
èµ¤ç¥æ—¥å¼è±¬æ’;4.2;$200-400;æ­£é¤;æ—¥å¼è±¬æ’;
éœå£½å¸;4.4;$200-400;æ­£é¤;æ—¥å¼å£½å¸;
Second Floor è²³æ¨“;4.3;$400-600;æ—©é¤/æ—©åˆé¤;ç¾å¼/æ—©åˆé¤;
é‡é †å·èœé¤å»³;4.2;$200-400;æ­£é¤;å·èœ;
å·´ä¼¯Qå¥¶;4.4;$1-200;é£²æ–™;æ‰‹æ–é£²;
Cui Lian Kitchen æ·¬ç…‰å»šæˆ¿;4.7;$1-200;æ­£é¤;æŠ«è–©;
ä¸¼å£½å¸;4.4;$200-400;æ­£é¤;æ—¥å¼ä¸¼é£¯;
éš±å®¶æ‹‰éºµ;4.2;$200-400;æ­£é¤;æ—¥å¼æ‹‰éºµ;
ç¯‰æœ¬å±‹;4.8;$1-200;æ­£é¤;æ—¥å¼è±¬æ’;
ä¸‰ç±³ä¸‰å°é¤¨;4.3;$1-200;æ­£é¤;è¤‡åˆå¼;
JJ's POKE & CAFE;4.1;$1-200;æ­£é¤;å¤å¨å¤·æ‹Œé£¯;
æ³°å¥½åƒæ³°åœ‹èˆ¹éºµ;4.5;$1-200;æ­£é¤;æ³°å¼æ–™ç†;
éŸ“å¤©é–£;4.0;$200-400;æ­£é¤;éŸ“å¼æ–™ç†;`;

        const { useState, useEffect, useRef } = React;
        
        // --- Icons ---
        const Utensils = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/></svg>;
        const RotateCcw = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>;
        const Shuffle = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l14.2-12.6c.8-1.1 2-1.7 3.3-1.7H22"/><path d="M2 6h1.4c1.3 0 2.5.6 3.3 1.7l14.2 12.6c.8 1.1 2 1.7 3.3 1.7H22"/></svg>;
        const Navigation = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="3 11 22 2 13 21 11 13 3 11"/></svg>;
        const PlusCircle = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="16"/><line x1="8" x2="16" y1="12" y2="12"/></svg>;
        const X = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>;
        const Upload = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" x2="12" y1="3" y2="15"/></svg>;
        const Sparkles = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 5H1"/></svg>;

        function FoodSelectorApp() {
            const [allRestaurants, setAllRestaurants] = useState([]);
            const [isSpinning, setIsSpinning] = useState(false);
            const [selectedResult, setSelectedResult] = useState(null);
            const [displayItem, setDisplayItem] = useState("ä»Šå¤©åƒä»€éº¼ï¼Ÿ");
            const [history, setHistory] = useState([]);
            
            // Modal ç‹€æ…‹
            const [showModal, setShowModal] = useState(false);
            const [activeTab, setActiveTab] = useState('manual'); 
            
            // AI Modal ç‹€æ…‹
            const [showAIModal, setShowAIModal] = useState(false);
            const [aiPrompt, setAiPrompt] = useState('');
            const [apiKey, setApiKey] = useState(localStorage.getItem('gemini_api_key') || '');
            const [isAiLoading, setIsAiLoading] = useState(false);
            const [aiReason, setAiReason] = useState('');

            // æ‰‹å‹•æ–°å¢è¡¨å–®
            const [formData, setFormData] = useState({
                name: '', rating: '', price: '$1-200', mainCat: 'æ­£é¤', subCat: '', note: ''
            });

            const intervalRef = useRef(null);
            const fileInputRef = useRef(null);

            // ç¯©é¸ç‹€æ…‹
            const [mainFilter, setMainFilter] = useState('All'); 
            const [cuisineFilter, setCuisineFilter] = useState('All');

            // --- æ ¸å¿ƒé‚è¼¯å‡ç´šï¼šæ”¯æ´å¤šé‡æ¨™ç±¤ (å›å‚³ Array) ---
            const classifyCuisine = (subCat) => {
                if (!subCat) return ['å…¶ä»–'];
                const s = subCat;
                const tags = [];
                
                // 1. å°å¼/ä¸­å¼ (æ“´å……: è‡­è±†è…, æ»·å‘³, ç±³ç²‰æ¹¯, ç‰›è‚‰éºµ, é¹¹æ°´é›, æ½¤é¤…)
                if (s.match(/(å°å¼|ä¸­å¼|æ¸¯å¼|ç‡’è‡˜|æ°´é¤ƒ|éºµé£Ÿ|é›è‚‰é£¯|ç±³ç²‰æ¹¯|ç²¥|ç†±ç‚’|å·èœ|å°åƒ|ä¾¿ç•¶|å®¶å¸¸èœ|é¤¡é¤…|åŒ…å­|é¥…é ­|èºè„ç²‰|éµæ¿ç‡’|é›²å—|è¤‡åˆå¼|ç°¡é¤|è‡­è±†è…|æ»·å‘³|ç‰›è‚‰éºµ|é¹¹æ°´é›|æ½¤é¤…)/)) {
                    tags.push('å°å¼/ä¸­å¼');
                }
                
                // 2. æ—¥å¼
                if (s.match(/(æ—¥å¼|æ‹‰éºµ|å£½å¸|ä¸¼é£¯|è±¬æ’|ç‡’è‚‰|å±…é…’å±‹|ä¸²ç‡’|æ—¥æœ¬)/)) {
                    tags.push('æ—¥å¼');
                }
                
                // 3. ç•°åœ‹/å—æ´‹
                if (s.match(/(æ³°å¼|è¶Šå—|é¦¬ä¾†è¥¿äº|æ–°é¦¬|ç•°åœ‹|æ–°åŠ å¡|æ³°åœ‹|éŸ“å¼|éŸ“åœ‹|å¤å·´|å°åº¦)/)) {
                    tags.push('ç•°åœ‹/å—æ´‹');
                }
                
                // 4. è¥¿å¼
                if (s.match(/(ç¾å¼|ç¾©å¼|ç¾©å¤§åˆ©|æ¼¢å ¡|ç‰›æ’|æŠ«è–©|è–„é¤…|è¥¿å¼|æ³•å¼|ç¾åœ‹|è¥¿éƒ¨|æ—©åˆé¤|ä¸‰æ˜æ²»|åå¸)/)) {
                    tags.push('è¥¿å¼');
                }
                
                // 5. é‹ç‰©/æ¹¯å“ (æ“´å……: éº»è¾£, è‡­è±†è…, æ»·å‘³, ç±³ç²‰æ¹¯, é®®é­šæ¹¯)
                // é€™æ¨£ã€Œå¾—è¨˜ã€æˆ–ã€Œç±³ç²‰æ¹¯ã€å°±æœƒåŒæ™‚å‡ºç¾åœ¨ å°å¼ å’Œ é‹ç‰©
                if (s.match(/(ç«é‹|éº»è¾£|æ»·å‘³|è‡­è±†è…|æ¹¯å“|ç±³ç²‰æ¹¯|ç ‚é‹|ç‰›è‚‰éºµ|é®®é­šæ¹¯)/)) {
                    tags.push('é‹ç‰©');
                }
                
                // 6. å¥åº·/è¼•é£Ÿ
                if (s.match(/(å¥åº·|å¤å¨å¤·|è¼•é£Ÿ|æ½¤é¤…|æ²™æ‹‰)/)) {
                    tags.push('å¥åº·/è¼•é£Ÿ');
                }
                
                if (tags.length === 0) tags.push('å…¶ä»–');
                return tags;
            };

            const parseCSV = (content) => {
                const rows = content.split('\n');
                const dataRows = rows.slice(1); 
                const parsed = dataRows
                    .filter(row => row.trim() !== '')
                    .map((row, index) => {
                        const cols = row.split(';');
                        if (cols.length < 2) return null;
                        const name = cols[0].trim();
                        const rating = cols[1] ? cols[1].trim() : "";
                        const price = cols[2] ? cols[2].trim() : "";
                        const mainCat = cols[3] ? cols[3].trim() : "å…¶ä»–";
                        const subCat = cols[4] ? cols[4].trim() : "";
                        const note = cols[5] ? cols[5].trim() : "";
                        const cuisineGroup = classifyCuisine(subCat); // ç¾åœ¨é€™æ˜¯ Array
                        return {
                            id: Date.now() + index,
                            name, rating, price, mainCat, subCat, cuisineGroup,
                            note: note || `${rating}â˜… ${subCat}`
                        };
                    })
                    .filter(item => item !== null);
                setAllRestaurants(parsed);
                setHistory([]);
            };

            useEffect(() => {
                parseCSV(DEFAULT_CSV_CONTENT);
            }, []);

            // --- AI åŠŸèƒ½ ---
            const handleAISuggestion = async () => {
                if (!apiKey.trim()) {
                    alert("è«‹å…ˆè¼¸å…¥æ‚¨çš„ Gemini API Key æ‰èƒ½ä½¿ç”¨ AI åŠŸèƒ½å–”ï¼");
                    return;
                }
                if (!aiPrompt.trim()) {
                    alert("è«‹å‘Šè¨´ AI æ‚¨ä»Šå¤©æƒ³åƒä»€éº¼ï¼");
                    return;
                }

                setIsAiLoading(true);
                localStorage.setItem('gemini_api_key', apiKey); // è¨˜ä½ Key

                // æº–å‚™çµ¦ AI çš„ç²¾ç°¡æ¸…å–® (ç¯€çœ token)
                const simpleList = allRestaurants.map(r => ({
                    id: r.id,
                    n: r.name, // Name
                    c: r.subCat, // Category
                    p: r.price // Price
                }));

                const systemPrompt = `You are a food expert near NTU (Taiwan). Pick the single best restaurant from the list below based on the user's desire.
                List: ${JSON.stringify(simpleList)}
                User says: "${aiPrompt}"
                Return ONLY a valid JSON object: { "id": number, "reason": "A fun, witty reason in Traditional Chinese (max 30 words)" }`;

                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: systemPrompt }] }]
                        })
                    });

                    const data = await response.json();
                    if (data.error) throw new Error(data.error.message);

                    const text = data.candidates[0].content.parts[0].text;
                    // æ¸…ç†å¯èƒ½å­˜åœ¨çš„ markdown block
                    const jsonStr = text.replace(/```json|```/g, '').trim();
                    const result = JSON.parse(jsonStr);

                    const restaurant = allRestaurants.find(r => r.id === result.id);
                    if (restaurant) {
                        setShowAIModal(false);
                        setDisplayItem(restaurant.name);
                        setSelectedResult(restaurant);
                        setAiReason(result.reason); // è¨­å®š AI è©•èª
                        setIsSpinning(false);
                    } else {
                        alert("AI æŒ‘é¸äº†ä¸€å®¶ä¸å­˜åœ¨çš„é¤å»³ï¼Œè«‹å†è©¦ä¸€æ¬¡");
                    }

                } catch (error) {
                    console.error(error);
                    alert("AI æ€è€ƒå¤±æ•—ï¼š" + error.message);
                } finally {
                    setIsAiLoading(false);
                }
            };

            // æ‰‹å‹•æ–°å¢åŠŸèƒ½
            const handleAddManual = (e) => {
                e.preventDefault();
                if(!formData.name) return;
                const newItem = {
                    id: Date.now(),
                    name: formData.name,
                    rating: formData.rating,
                    price: formData.price,
                    mainCat: formData.mainCat,
                    subCat: formData.subCat,
                    cuisineGroup: classifyCuisine(formData.subCat),
                    note: formData.note || `${formData.rating}â˜… ${formData.subCat}`
                };
                setAllRestaurants(prev => [newItem, ...prev]);
                alert(`å·²æ–°å¢ï¼š${formData.name}`);
                setShowModal(false);
                setFormData({ name: '', rating: '', price: '$1-200', mainCat: 'æ­£é¤', subCat: '', note: '' });
            };

            const handleFileUpload = (event) => {
                const file = event.target.files[0];
                if (!file) return;
                const reader = new FileReader();
                reader.onload = (e) => {
                    parseCSV(e.target.result);
                    alert("åŒ¯å…¥æˆåŠŸï¼å·²æ›´æ–°é¤å»³æ¸…å–®ã€‚");
                    setShowModal(false);
                };
                reader.readAsText(file);
            };

            const getFilteredRestaurants = () => {
                let filtered = allRestaurants;
                if (mainFilter === 'Breakfast') {
                    filtered = filtered.filter(r => r.mainCat.includes('æ—©é¤'));
                } else if (mainFilter === 'Dessert') {
                    filtered = filtered.filter(r => r.mainCat.includes('ç”œé»') || r.mainCat.includes('é£²æ–™') || r.mainCat.includes('é»å¿ƒ'));
                } else if (mainFilter === 'Main') {
                    filtered = filtered.filter(r => r.mainCat.includes('æ­£é¤') || r.mainCat.includes('å®µå¤œ'));
                    if (cuisineFilter !== 'All') {
                        filtered = filtered.filter(r => r.cuisineGroup.includes(cuisineFilter));
                    }
                }
                return filtered;
            };

            // å¼·åˆ¶é‡æ•´åŠŸèƒ½
            const handleForceReload = () => {
                if (confirm("é€™å°‡æœƒå¼·åˆ¶é‡æ–°æ•´ç†ç¶²é ä»¥ç²å–æœ€æ–°ç‰ˆæœ¬ï¼Œç¢ºå®šå—ï¼Ÿ")) {
                    window.location.href = window.location.pathname + '?v=' + new Date().getTime();
                }
            };

            const handleRandomize = () => {
                setAiReason(''); // æ¸…é™¤ AI è©•èª
                const candidates = getFilteredRestaurants();
                if (candidates.length === 0) {
                    alert("ç¯©é¸æ¢ä»¶ä¸‹æ²’æœ‰é¤å»³ï¼è«‹æ”¾å¯¬æ¢ä»¶ã€‚");
                    return;
                }
                setIsSpinning(true);
                setSelectedResult(null);

                let available = candidates.filter(r => !history.includes(r.id));
                if (available.length === 0) {
                    available = candidates;
                    const candidateIds = candidates.map(c => c.id);
                    setHistory(prev => prev.filter(id => !candidateIds.includes(id)));
                }

                let count = 0;
                const totalDuration = 1500;
                const speed = 40;

                intervalRef.current = setInterval(() => {
                    const randomIdx = Math.floor(Math.random() * candidates.length);
                    setDisplayItem(candidates[randomIdx].name);
                    count += speed;
                }, speed);

                setTimeout(() => {
                    clearInterval(intervalRef.current);
                    const finalIndex = Math.floor(Math.random() * available.length);
                    const winner = available[finalIndex];
                    
                    setDisplayItem(winner.name);
                    setSelectedResult(winner);
                    setIsSpinning(false);
                    setHistory(prev => [...prev, winner.id]);
                }, totalDuration);
            };

            const openGoogleMaps = (name) => {
                const query = encodeURIComponent(`å°å¤§å…¬é¤¨ ${name}`);
                window.open(`https://www.google.com/maps/search/?api=1&query=${query}`, '_blank');
            };

            return (
                <div className="min-h-screen font-sans flex flex-col max-w-md mx-auto overflow-hidden relative bg-orange-50 border-x border-orange-100">
                    <header className="bg-orange-500 text-white p-4 shadow-sm z-10 flex justify-between items-center">
                        <h1 className="text-xl font-bold flex items-center gap-2 tracking-wide">
                            <Utensils className="w-6 h-6" />
                            è‡ºå¤§åƒåˆ°å
                        </h1>
                        <button onClick={() => setShowModal(true)} className="bg-orange-600 p-2 rounded-full hover:bg-orange-700 transition-colors shadow-sm border border-orange-400">
                            <PlusCircle className="w-5 h-5" />
                        </button>
                    </header>

                    {/* AI Modal */}
                    {showAIModal && (
                        <div className="fixed inset-0 z-50 flex items-end sm:items-center justify-center p-4">
                            <div className="modal-overlay absolute inset-0 bg-black bg-opacity-60 backdrop-blur-sm" onClick={() => setShowAIModal(false)}></div>
                            <div className="modal-content bg-white rounded-t-2xl sm:rounded-2xl shadow-xl w-full max-w-sm overflow-hidden z-10 relative p-6">
                                <div className="flex justify-between items-center mb-4">
                                    <h2 className="text-lg font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 flex items-center gap-2">
                                        <Sparkles className="w-5 h-5 text-blue-500" /> AI éˆæ„Ÿå¹«æ‰‹
                                    </h2>
                                    <button onClick={() => setShowAIModal(false)} className="text-gray-400 hover:text-gray-600"><X className="w-5 h-5"/></button>
                                </div>
                                
                                <div className="space-y-4">
                                    <div>
                                        <label className="block text-xs font-bold text-gray-500 mb-1">æ‚¨çš„ Gemini API Key (åƒ…å„²å­˜æ–¼æœ¬åœ°)</label>
                                        <input 
                                            type="password" 
                                            className="w-full border rounded-lg p-2 text-sm bg-gray-50 focus:ring-2 focus:ring-blue-500 outline-none" 
                                            placeholder="è«‹è²¼ä¸Š API Key..." 
                                            value={apiKey} 
                                            onChange={e => setApiKey(e.target.value)} 
                                        />
                                        <p className="text-[10px] text-gray-400 mt-1">é‚„æ²’æœ‰ Keyï¼Ÿå» Google AI Studio å…è²»ç”³è«‹ä¸€å€‹å§ï¼</p>
                                    </div>
                                    <div>
                                        <label className="block text-xs font-bold text-gray-500 mb-1">ä»Šå¤©å¿ƒæƒ…å¦‚ä½•ï¼Ÿæƒ³åƒé»ä»€éº¼ï¼Ÿ</label>
                                        <textarea 
                                            className="w-full border rounded-lg p-3 text-sm focus:ring-2 focus:ring-blue-500 outline-none h-24 resize-none" 
                                            placeholder="ä¾‹å¦‚ï¼šå‰›è€ƒå®Œè©¦æƒ³åƒå¥½ä¸€é»ã€æœˆåº•äº†æƒ³åƒä¾¿å®œçš„ã€æƒ³åƒè¾£çš„ç™¼æ´©ä¸€ä¸‹..." 
                                            value={aiPrompt} 
                                            onChange={e => setAiPrompt(e.target.value)} 
                                        />
                                    </div>
                                    <button 
                                        onClick={handleAISuggestion} 
                                        disabled={isAiLoading}
                                        className={`w-full py-3 rounded-xl font-bold text-white shadow-sm flex items-center justify-center gap-2 transition-all ${isAiLoading ? 'bg-gray-400 cursor-not-allowed' : 'bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700'}`}
                                    >
                                        {isAiLoading ? <span className="flex items-center gap-2"><Sparkles className="w-4 h-4 animate-spin"/> AI æ­£åœ¨æ€è€ƒä¸­...</span> : <><Sparkles className="w-4 h-4"/> å¹«æˆ‘é¸ä¸€å®¶ï¼</>}
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* æ–°å¢/åŒ¯å…¥ Modal */}
                    {showModal && (
                        <div className="fixed inset-0 z-50 flex items-end sm:items-center justify-center p-4">
                            <div className="modal-overlay absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm" onClick={() => setShowModal(false)}></div>
                            <div className="modal-content bg-white rounded-t-2xl sm:rounded-2xl shadow-xl w-full max-w-sm overflow-hidden z-10 relative">
                                <div className="flex border-b">
                                    <button 
                                        className={`flex-1 py-3 font-bold text-sm ${activeTab === 'manual' ? 'text-orange-600 border-b-2 border-orange-600 bg-orange-50' : 'text-gray-500 hover:bg-gray-50'}`}
                                        onClick={() => setActiveTab('manual')}
                                    >æ‰‹å‹•æ–°å¢</button>
                                    <button 
                                        className={`flex-1 py-3 font-bold text-sm ${activeTab === 'csv' ? 'text-orange-600 border-b-2 border-orange-600 bg-orange-50' : 'text-gray-500 hover:bg-gray-50'}`}
                                        onClick={() => setActiveTab('csv')}
                                    >åŒ¯å…¥ CSV</button>
                                    <button onClick={() => setShowModal(false)} className="absolute right-2 top-2 p-2 text-gray-400 hover:text-gray-600"><X className="w-5 h-5"/></button>
                                </div>

                                <div className="p-6">
                                    {activeTab === 'manual' ? (
                                        <form onSubmit={handleAddManual} className="space-y-3">
                                            <div>
                                                <label className="block text-xs font-bold text-gray-500 mb-1">é¤å»³åç¨±</label>
                                                <input required type="text" className="w-full border rounded-lg p-2 focus:ring-2 focus:ring-orange-500 outline-none" placeholder="ä¾‹å¦‚: å§å¦¹èŠ±é›æ’" value={formData.name} onChange={e => setFormData({...formData, name: e.target.value})} />
                                            </div>
                                            <div className="flex gap-2">
                                                <div className="flex-1">
                                                    <label className="block text-xs font-bold text-gray-500 mb-1">è©•åˆ†</label>
                                                    <input type="number" step="0.1" className="w-full border rounded-lg p-2 focus:ring-2 focus:ring-orange-500 outline-none" placeholder="4.5" value={formData.rating} onChange={e => setFormData({...formData, rating: e.target.value})} />
                                                </div>
                                                <div className="flex-1">
                                                    <label className="block text-xs font-bold text-gray-500 mb-1">åƒ¹æ ¼</label>
                                                    <select className="w-full border rounded-lg p-2 bg-white" value={formData.price} onChange={e => setFormData({...formData, price: e.target.value})}>
                                                        <option>$1-200</option>
                                                        <option>$200-400</option>
                                                        <option>$400-600</option>
                                                        <option>$600+</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div className="flex gap-2">
                                                <div className="flex-1">
                                                    <label className="block text-xs font-bold text-gray-500 mb-1">ä¸»åˆ†é¡</label>
                                                    <select className="w-full border rounded-lg p-2 bg-white" value={formData.mainCat} onChange={e => setFormData({...formData, mainCat: e.target.value})}>
                                                        <option>æ­£é¤</option>
                                                        <option>æ—©é¤/æ—©åˆé¤</option>
                                                        <option>ç”œé»</option>
                                                        <option>é£²æ–™</option>
                                                    </select>
                                                </div>
                                                <div className="flex-1">
                                                    <label className="block text-xs font-bold text-gray-500 mb-1">æ¬¡åˆ†é¡ (èœç³»)</label>
                                                    <input type="text" className="w-full border rounded-lg p-2 focus:ring-2 focus:ring-orange-500 outline-none" placeholder="å¦‚: æ—¥å¼, éŸ“å¼" value={formData.subCat} onChange={e => setFormData({...formData, subCat: e.target.value})} />
                                                </div>
                                            </div>
                                            <div>
                                                <label className="block text-xs font-bold text-gray-500 mb-1">å‚™è¨»</label>
                                                <input type="text" className="w-full border rounded-lg p-2 focus:ring-2 focus:ring-orange-500 outline-none" placeholder="å¿…é»..." value={formData.note} onChange={e => setFormData({...formData, note: e.target.value})} />
                                            </div>
                                            <button type="submit" className="w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 rounded-xl mt-2 transition-colors">åŠ å…¥æ¸…å–®</button>
                                        </form>
                                    ) : (
                                        <div className="text-center py-4">
                                            <div className="bg-orange-50 rounded-xl p-4 mb-4 text-left text-sm text-gray-600 space-y-2 border border-orange-100">
                                                <p className="font-bold text-orange-700">CSV æ ¼å¼è¦æ±‚ (åˆ†è™Ÿåˆ†éš”):</p>
                                                <code className="block bg-white p-2 rounded text-xs">é¤å»³åç¨±;è©•åˆ†;åƒ¹æ ¼;ä¸»åˆ†é¡;æ¬¡åˆ†é¡;å‚™è¨»</code>
                                                <p className="text-xs">è«‹ç¢ºä¿ä½¿ç”¨åˆ†è™Ÿ (;) è€Œéé€—è™Ÿï¼Œé¿å…æ¬„ä½éŒ¯äº‚ã€‚</p>
                                            </div>
                                            <button onClick={() => fileInputRef.current.click()} className="w-full border-2 border-dashed border-gray-300 hover:border-orange-500 hover:text-orange-500 text-gray-400 font-bold py-8 rounded-xl transition-all flex flex-col items-center gap-2">
                                                <Upload className="w-8 h-8" />
                                                é»æ“Šé¸æ“‡ CSV æª”æ¡ˆ
                                            </button>
                                            <input type="file" ref={fileInputRef} accept=".csv" onChange={handleFileUpload} />
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    )}

                    {/* ç¯©é¸å€å¡Š */}
                    <div className="bg-white p-3 border-b border-orange-100 z-10">
                        <div className="flex gap-2 mb-2 overflow-x-auto no-scrollbar pb-1">
                            {['All', 'Main', 'Breakfast', 'Dessert'].map(type => (
                                <button 
                                    key={type}
                                    onClick={() => { setMainFilter(type); setCuisineFilter('All'); }}
                                    className={`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition-all ${
                                        mainFilter === type 
                                        ? 'bg-orange-500 text-white shadow-sm' 
                                        : 'bg-gray-100 text-gray-500 hover:bg-gray-200'
                                    }`}
                                >
                                    {type === 'All' ? 'å…¨éƒ¨' : type === 'Main' ? 'æ­£é¤' : type === 'Breakfast' ? 'æ—©é¤' : 'ç”œé»/é£²æ–™'}
                                </button>
                            ))}
                        </div>

                        {mainFilter === 'Main' && (
                            <div className="flex gap-2 overflow-x-auto no-scrollbar pt-1 animate-in fade-in slide-in-from-top-1 duration-200">
                                {['All', 'å°å¼/ä¸­å¼', 'æ—¥å¼', 'ç•°åœ‹/å—æ´‹', 'è¥¿å¼', 'é‹ç‰©', 'å¥åº·/è¼•é£Ÿ'].map(c => (
                                    <button 
                                        key={c}
                                        onClick={() => setCuisineFilter(c)}
                                        className={`px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap border transition-all ${
                                            cuisineFilter === c 
                                            ? 'bg-blue-100 text-blue-700 border-blue-200' 
                                            : 'bg-white text-gray-500 border-gray-200 hover:border-gray-300'
                                        }`}
                                    >
                                        {c === 'All' ? 'ä¸æ‹˜' : c}
                                    </button>
                                ))}
                            </div>
                        )}
                        
                        <div className="text-center mt-2 text-xs text-gray-400">
                            ç¬¦åˆæ¢ä»¶ï¼š{getFilteredRestaurants().length} å®¶
                        </div>
                    </div>

                    <main className="flex-1 flex flex-col items-center justify-center p-6 relative overflow-hidden">
                        <div className="absolute top-0 left-0 w-full h-full opacity-5 pointer-events-none select-none">
                            <div className="absolute top-10 left-10 text-9xl">ğŸœ</div>
                        </div>

                        <div className={`w-full bg-white rounded-3xl p-8 text-center transition-all duration-300 border border-orange-100 shadow-sm ${isSpinning ? 'scale-105 shadow-md' : ''}`}>
                            <div className="mb-6 h-32 flex items-center justify-center relative">
                                <h2 className={`text-3xl font-black text-gray-800 leading-tight ${isSpinning ? 'opacity-50 blur-[1px]' : ''}`}>
                                    {displayItem}
                                </h2>
                            </div>

                            {!isSpinning && selectedResult && (
                                <div className="animate-in fade-in slide-in-from-bottom-4 duration-500 mb-6">
                                    {aiReason && (
                                        <div className="mb-4 bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-100 p-3 rounded-xl text-left shadow-sm">
                                            <div className="flex items-center gap-2 mb-1 text-xs font-bold text-blue-600">
                                                <Sparkles className="w-3 h-3" /> AI æ¨è–¦åŸå› ï¼š
                                            </div>
                                            <p className="text-sm text-gray-700 leading-relaxed">{aiReason}</p>
                                        </div>
                                    )}
                                    <div className="flex flex-wrap gap-2 justify-center mb-4">
                                        <span className="text-xs bg-orange-100 text-orange-600 px-2 py-1 rounded-md">{selectedResult.mainCat}</span>
                                        <span className="text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded-md">{selectedResult.subCat}</span>
                                        {selectedResult.price && <span className="text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-md">{selectedResult.price}</span>}
                                    </div>
                                    <p className="text-orange-600 font-bold mb-4 text-xl">{selectedResult.rating}â˜…</p>
                                    
                                    <button onClick={() => openGoogleMaps(selectedResult.name)} className="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-xl flex items-center justify-center gap-2 shadow-sm border border-blue-200 active:scale-95 transition-transform">
                                        <Navigation className="w-5 h-5" /> Google Maps
                                    </button>
                                </div>
                            )}

                            <div className="flex gap-3 w-full">
                                <button onClick={handleRandomize} disabled={isSpinning} className={`flex-1 py-4 rounded-2xl text-lg font-bold text-white flex items-center justify-center gap-2 ${isSpinning ? 'bg-gray-400 cursor-not-allowed' : 'bg-gradient-to-r from-orange-500 to-red-500 hover:opacity-90 shadow-sm active:scale-95 transition-all'}`}>
                                    {isSpinning ? <RotateCcw className="w-5 h-5 animate-spin" /> : <><Shuffle className="w-5 h-5" /> éš¨ä¾¿å¹«æˆ‘é¸</>}
                                </button>
                                <button 
                                    onClick={() => setShowAIModal(true)}
                                    disabled={isSpinning}
                                    className="flex-none w-16 bg-white border-2 border-blue-100 text-blue-600 rounded-2xl shadow-sm hover:bg-blue-50 active:scale-95 transition-transform flex items-center justify-center"
                                    title="AI éˆæ„Ÿå¹«æ‰‹"
                                >
                                    <Sparkles className="w-6 h-6" />
                                </button>
                            </div>
                        </div>
                    </main>

                    {/* Footer - Professional Credits */}
                    <footer className="bg-gray-100 text-center py-6 px-4 border-t border-gray-200 mt-auto">
                        <div className="flex flex-col items-center gap-2">
                            <p className="text-xs text-gray-500 font-[Futura,sans-serif] tracking-tight">
                                Food list created by <span className="font-bold text-gray-700">ä»Šä»Š</span>
                            </p>
                            <div className="w-12 h-0.5 bg-gray-300 rounded-full my-1"></div>
                            <p className="text-xs text-gray-500 font-[Futura,sans-serif] tracking-tight">
                                Designed by <span className="font-bold text-gray-700">ç¿è­½ç‘„</span> & <span className="font-bold text-blue-600">Gemini 3 pro</span>
                            </p>
                            <p className="text-[10px] text-gray-400 mt-1 font-[Futura,sans-serif] tracking-tight cursor-pointer hover:text-orange-500 transition-colors" onClick={handleForceReload} title="é»æ“Šå¼·åˆ¶é‡æ–°æ•´ç†">
                                Last Updated: 2025.12.10 (v2.0)
                            </p>
                        </div>
                    </footer>
                </div>
            );
        }
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<FoodSelectorApp />);
    </script>
</body>
</html>